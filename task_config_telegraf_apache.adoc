---
sidebar: sidebar
permalink: task_config_telegraf_apache.html
keywords: telegraf, installation, install, apache
summary: Apache data collector configuration
---

= Apache Data Collector

:toc: macro
:hardbreaks:
:toclevels: 1
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/



[.lead]
This data collector allows collection of data from Apache servers in your environment.

.Pre-requisites

* You must have Apache set up and properly running on your servers
* You must have sudo or administrator permissions on your agent host/VM
* Typically, the Apache _mod_status_ module is configured to expose a page at the '/server-status?auto' location of the Apache server. The _ExtendedStatus_ option must be enabled in order to collect all available fields. For information about how to configure your server, see the Apache module documentation: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable

== Installation 

. From *Admin > Data Collectors*, click *+Data Collector*. Under *Services*, choose Apache.
+
If you haven't configured an Agent for collection, you are prompted to link:task_config_telegraf_agent.html[install an agent] in your environment.
+
If you have an agent already configured, select the appropriate Operating System or Platform and click *Continue*.

. Follow the instructions in the Apache Configuration screen to configure the data collector. The instructions vary depending on the type of Operating System or Platform you are using to collect data. The example below shows the instructions for Linux:

image:ApacheDCConfigLinux.png[Apache configuration]

== Apache Configuration

Telegraf's plugin for Apache's HTTP Server relies on the 'mod_status' module to be enabled. When this is enabled, Apache's HTTP Server will expose an HTML endpoint that can be viewed on your browser or scraped for extraction of status of all Apache's HTTP Server configuration.

==== Compatibility:
Configuration was developed against Apache's HTTP Server version 2.4.38.

==== Enabling mod_status:
Enabling and exposing the 'mod_status' modules involves two steps:

* Enabling module
* Exposing stats from module


==== Enabling module:
The loading of modules is controlled by the config file under '/usr/local/apache/conf/httpd.conf'. Edit the config file and uncomment the following lines:

 LoadModule status_module modules/mod_status.so

 Include conf/extra/httpd-info.conf


==== Exposing stats from module:

The exposing of 'mod_status' is controlled by the config file under '/usr/local/apache2/conf/extra/httpd-info.conf'. Make sure you have the following in that configuration file (at least, other directives will be there):

----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>
 
#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----

For detailed instructions on the 'mod_status' module, see the link:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[Apache documentation]


== Troubleshooting

Additional information may be found from the link:concept_requesting_support.html[Support] page.
