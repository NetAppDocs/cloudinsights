---
sidebar: sidebar
permalink: security_admin_tool.html
summary:  Cloud Insights follows security best practices throughout the release life cycle.
keywords: security, risk, protection
---

= SecurityAdmin Tool

:toc: macro
:hardbreaks:
:toclevels: 2
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]

Cloud Insights Includes security features that allow your environment to operate with enhanced security. The features include improvements to encryption, password hashing, and the ability to change internal user passwords as well as key pairs that encrypt and decrypt passwords. 

To protect sensitive data, NetApp recommends you change the default keys and the _Acquisition_ user password after an installation or upgrade.

Data source encrypted passwords are stored in Cloud Insights, which uses a a public key to encrypt passwords when a user enters them in a data collector configuration page. Cloud Insights does not have the private keys required to decrypt the data collector passwords; only Acquisition Units (AUs) have the data collector private key required to decrypt data collector passwords.  


== Upgrade and installation considerations

When your Insight system contains non-default security configurations (i.e. you have rekeyed passwords), you must back up your security configurations. Installing new software, or in some cases upgrading software, reverts your system to a default security configuration. When your system reverts to the default configuration, you must restore the non-default configuration in order for the system to operate correctly.

== Managing security on the acquisition unit

The SecurityAdmin tool allows you to manage security options for Cloud Insights, and is run on the acquisition unit system. Security management includes managing keys and passwords, saving and restoring security configurations you create or restoring configurations to the default settings.

== Before you begin

* You must have admin privileges on the AU system in order to install the Acquisition Unit software (which includes the SecurityAdmin tool).
* If you have non-admin users who will subsequently need to access the SecurityAdmin tool, they must be added to the _cisys_ group. The _cisys_ group is created during AU installation. 

After AU install, the SecurityAdmin tool is found on the acquisition unit system at either of these locations:

 Windows - C:\Program Files\SANscreen\securityadmin\bin\securityadmin.bat
 Linux - /bin/oci-securityadmin.sh

== Using the SecurityAdmin Tool

Start the SecurityAdmin tool in interactive mode (-i).

NOTE: It is strongly recommended to use the SecurityAdmin tool in interactive mode, to avoid passing secrets on the command line, which can be captured in logs. 

The following options are displayed:

image:SecurityAdminMenuChoices.png[Options for SecurityAdmin Tool (Linux)]

. *Backup*

+
Creates a backup zip file of the vault containing all passwords and keys and places the file in a location specified by the user, or in the following default locations:
+
 Windows - C:\Program Files\SANscreen\backup\vault
 Linux - /var/log/netapp/oci/backup/vault
+
It is strongly recommended that vault backups be kept secure, as they include sensitive information.

. *Restore*
+
Restores the zip backup of the vault that was created. Once restored, all passwords and keys are reverted to values existing at the time of the backup creation.
+
Restore can be used to synchronize passwords and keys on multiple servers, for example using these steps: 1) Change encryption keys on the AU. 2) Create a backup of the vault. 3) Restore the vault backup to each of the AUs.

. *Register / Update External Key Retrieval Script*
+
Use an external script to register or change the AU encryption keys used to encrypt or decrypt device passwords.
+
When you change encryption keys, you should back up your new security configuration so that you can restore it after an upgrade or installation.
+
Note this option is only available on Linux.
+
When using your own key retrieval script with the SecurityAdmin tool, keep the following in mind:

* The current supported Algorithm is RSA with minimum 2048 bits.  
* The script must return the private and public keys in plain text. The script must not return encrypted private and public keys. 
* The script should return raw, encoded contents (PEM format only). 
* The external script must have _execute_ permissions.

. *Rotate Encryption Keys*
+
Rotate your encryption keys (un-registers current keys and registers new keys). To use a key from an external key management system, you must specify the public key id and private key id.


////

* Update Password
+
Change password for 'acquisition' user account.
+
When you change passwords, you should back up your new security configuration so that you can restore it if necessary.
////

. *Reset to Default Keys*
+
Resets acquisition user password and acquisition user encryption keys to default values, Default values are those provided during installation.

. *Change Truststore Password*
+
Change the password of the truststore.

. *Change Keystore Password*
+
Change the password of the keystore.

. *Encrypt Collector Password*
+
Encrypt data collector password.

. *Exit*

+
Exit the SecurityAdmin tool.

Chose the option you want to configure and follow the prompts.


== Specifying a user to run the tool

If you are in a controlled, security-conscious environment, you may not have the _cisys_ group but may still want specific users to run the SecurityAdmin tool.

You can achieve this by manually installing the AU software and specifying the user/group for whom you want access.

* Using the API, download the CI Installer to the AU system and unzip it.

** You will need a one-time authorization token. See the API Swagger documentation (_Admin > API Access_ and select the _API Documentation_ link) and find the _GET /au/oneTimeToken_ API section.
** Once you have the token, use the _GET /au/installers/{platform}/{version}_ API to download the installer file. You will need to provide platform (Linux or Windows) as well as installer version.

* Copy the downloaded installer file to the AU system and unzip it.

* Navigate to the folder containing the files, and run the installer as root, specifying the user and group:

 ./cloudinsights-install.sh <User> <Group>  

If the specified user and/or group do not exist, they will be created. The user will have access to the SecurityAdmin tool.





