---
sidebar: sidebar
permalink: task_config_telegraf_kubernetes.html
keywords: telegraf, installation, install, kubernetes
summary: Kubernetes data collector configuration
---

= Kubernetes Data Collector

:toc: macro
:hardbreaks:
:toclevels: 1
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Cloud Insights uses this data collector to gather Kubernetes Pod, Node, and Container metrics. 

// You can expand collection to include StatefulSet, DaemonSet, Deployment, PV, PVC, ReplicaSet, Service, Namespace, Secret, ConfigMap, Pod Volume, and Ingress by <<Installing the kube-state-metrics server>>. 

== Installation

TIP: It is strongly recommended to deploy the Telegraf agent as a DaemonSet within the Kubernetes environment itself, by selecting _Kubernetes_ as the platform during agent installation.

. From *Admin > Data Collectors*, click *+Data Collector*. Under *Services*, choose Kubernetes.
+
If you haven't configured an Agent for collection, you are prompted to link:task_config_telegraf_agent.html[install an agent] in your environment.
+
If you have an agent already configured, select the appropriate Operating System or Platform and click *Continue*.

. Follow the instructions in the Kubernetes Configuration screen to configure the data collector. The instructions vary depending on the type of Operating System or Platform you are using to collect data. The example below shows the instructions for installing the Kubernetes data collector on the Kubernetes platform:

//image:KubernetesDCConfigKube.png[Kubernetes configuration]
image:kubernetesdatacollectorConfig.png[Kubernetes Configuration]

== Setup
The Telegraf input plugin for Kubernetes collects metrics through the /stats/summary endpoint of the kubelet REST API.

==== Compatibility
Configuration was developed against Kubernetes version 1.9.1.

==== Configuring an Agent to Collect Data from Kubernetes

For Kubernetes environments, Cloud Insights deploys the Telegraf agent as a DaemonSet. The pods in which the agents run need to have access to the following:

* hostPath
* configMap
* secrets

These Kubernetes objects are automatically created as part of the Kubernetes agent install command provided in the Cloud Insights UI. Some variants of Kubernetes, such as OpenShift, implement an added level of security that may block access to these components. The _SecurityContextConstraint_ is not created as part of the Kubernetes agent install command provided in the Cloud Insights UI, and must be created manually. Once created, restart the Telegraf pod(s).

//In such cases, an additional manual step may be required.  As an example, for OpenShift, you may need to create a _SecurityContextConstraint_ to grant the telegraf-user ServiceAccount access to these components.

----
    apiVersion: v1
    kind: SecurityContextConstraints
    metadata:
      name: telegraf-hostaccess
      creationTimestamp:
      annotations:
        kubernetes.io/description: telegraf-hostaccess allows hostpath volume mounts for restricted SAs.
      labels:
        app: ci-telegraf
    priority: 10
    allowPrivilegedContainer: false
    defaultAddCapabilities: []
    requiredDropCapabilities: []
    allowedCapabilities: []
    allowedFlexVolumes: []
    allowHostDirVolumePlugin: true
    volumes:
    - hostPath
    - configMap
    - secret
    allowHostNetwork: false
    allowHostPorts: false
    allowHostPID: false
    allowHostIPC: false
    seLinuxContext:
      type: MustRunAs
    runAsUser:
      type: RunAsAny
    supplementalGroups:
      type: RunAsAny
    fsGroup:
      type: RunAsAny
    readOnlyRootFilesystem: false
    users:
    - system:serviceaccount:monitoring:telegraf-user
    groups: []
----
    
==== Setting Up

For collecting Kubernetes metrics, the best practice is to deploy the Telegraf agent as a DaemonSet within the Kubernetes environment of interest itself. The Cloud Insights agent install command does this if run on one of the Kubernetes nodes in the cluster. With the DaemonSet that is created, you can simply specify the "$HOSTIP" environment variable for <INSERT_KUBELET_ADDRESS> in the telegraf-conf ConfigMap. 

The pods in which the Telegraf agents run need to have access to a valid Kubernetes access token file in order to use the required kubelet API. To configure a Telegraf agent running outside the Kubernetes cluster of interest, you must manually generate this Kubernetes access token file, and configure the Telegraf agent to use this access token file.

To manually generate the Kubernetes access token, run the following in a Bash shell:

 SECRET=$(sudo kubectl --namespace kube-system describe sa default |grep Tokens |awk '{print $2}')

 TOKEN=$(sudo kubectl --namespace kube-system describe secrets $SECRET |grep ^token |awk '{print $2}')

To verify that the access token works as needed, run the following to confirm the kubelet API is accessible:

 curl -v -X GET -H "Authorization: Bearer $TOKEN" https://<KUBELET_ADDRESS>:<KUBELET_PORT>/stats/summary

To create the required access token file, run the following:

 mkdir -p /var/run/secrets/kubernetes.io/serviceaccount/

 echo -n $TOKEN | sudo tee /var/run/secrets/kubernetes.io/serviceaccount/token

By default, the Kubernetes input plugin configuration provided by CloudInsights is set up to look for the required access token file in the location used above. After performing the steps above, restart the Telegraf agent for the changes to take effect.

== Objects and Counters

The following objects and their counters are collected:

[cols="<.<,<.<,<.<,<.<"]
|===
|Object:|Identifiers:|Attributes: |Datapoints:

|Kubernetes Container

|Namespace
Pod
Container
Cluster

|Kubernetes Node
Node Name
Node OS
Node UUID
Node IP


|CPU Nanoseconds
CPU Usage Nanocores
Memory Major Page Faults
Memory Resident Set Size (RSS)
Memory Working Set
Memory Page Faults
Memory Usage
Root Filesystem Available
Root Filesystem Capacity
Root Filesystem Used

|Kubernetes Node

|Kubernetes Node
Cluster

|Node Name
Node OS
Node UUID
Node IP

|CPU Usage Nanocores
CPU Usage Nanoseconds
Filesystem Available
Filesystem Total
Filesystem Used
Memory Available
Memory Usage 
Memory Major Page Faults
Memory Page Faults
Memory Resident Set Size (RSS)
Memory Working Set
Network RX Errors (per sec)
Network RX Bytes (per sec)
Network TX Errors (per sec)
Network TX Bytes (per sec)
Runtime Image Filesystem Available
Runtime Image Filesystem Used
Runtime Image Filesystem Capacity 

|Kubernetes Pod

|Namespace
Pod
Cluster

|Kubernetes Node
Node Name
Node IP
Node OS
Node UUID

|Network TX Bytes (per sec)
Network TX Errors (per sec)
Network RX Bytes (per sec)
Network RX Errors (per sec)

|Kubernetes Pod Volume
|Volume
Pod
Cluster
Namespace
|Kubernetes Node
Node Name
Node UUID
Node IP
Node OS

|Available
Capacity
Used

|===

== Installing the kube-state-metrics server

When you install the kube-state-metrics server you can enable colletction of the following Kubernetes objects: StatefulSet, DaemonSet, Deployment, PV, PVC, ReplicaSet, Service, Namespace, Secret, ConfigMap, Pod Volume, and Ingress. 

Use the following steps to install the kube-state-metrics server:

.Steps

. Create a temporary folder (for example, _/tmp/kube-state-yaml-files/_) and copy the .yaml files from https://github.com/kubernetes/kube-state-metrics/tree/master/kubernetes to this folder. 

. Run the following command to apply the .yaml files needed for installing kube-state-metrics:

 kubectl apply -f /tmp/kube-state-yaml-files/


=== kube-state-metrics Counters

=== cronjob Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
| Object | Identifiers | Attributes | Datapoints

|kube_cronjob_info|cronjob-namespace|cronjob-name|schedule,  
concurrency_policy

|kube_cronjob_labels
|namespace|cronjob_name
cronjob_labels|cronjob

|kube_cronjob_created|cronjob-namesapce
|cronjob-name|xx

|kube_cronjob_next_schedule_time|cronjob-namesapce|cronjob-name|xx

|kube_cronjob_status_active|cronjob-namesapce
|cronjob-name|xx

|kube_cronjob_status_last_schedule_time|cronjob-namesapce|time|xx

|kube_cronjob_spec_suspend|cronjob-name 
cronjob-namespace||

|kube_cronjob_spec_starting_deadline_seconds|cronjob-name 
cronjob-namespace|
|===


=== DaemonSet Metrics

[cols=4 ,options="header",cols"25,25,25,25"]
|===
|Object|Identifiers|Attributes|Datapoints
|kube_daemonset_created|daemonset-name|daemonset-namespace|xx
|kube_daemonset_status_current_number_scheduled|daemonset-name|daemonset-namespace|xx

|kube_daemonset_status_desired_number_scheduled| deamonset_name| daemonset-namespace|xxx
|kube_daemonset_status_number_available|deamonset_name|daemonset-namespace|
|kube_daemonset_status_number_misscheduled|deamonset_name| daemonset-namespace|xx
|kube_daemonset_status_number_ready|deamonset_name|daemonset-namespace|xx
|kube_daemonset_status_number_unavailable|deamonset_name|daemonset-namespace|xx

|kube_daemonset_updated_number_scheduled|deamonset_name|daemonset-namespace|
|kube_daemonset_metadata_generation|||
|kube_daemonset_metadata_generation|||
|kube_daemonset_labels|||
|===

=== Deployment Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object|Identifiers|Attributes|Datapoints
|kube_deployment_status_replicas|deployment-name|deployment-namespace|Gauge
|kube_deployment_status_replicas_available|deployment-name|deployment-namespace|Gauge
|kube_deployment_status_replicas_unavailable|deployment-name|deployment-namespace|Gauge
|kube_deployment_status_replicas_updated|deployment-name|deployment-namespace|Gauge
|kube_deployment_status_observed_generation|deployment-name|deployment-namespace|Gauge
|kube_deployment_spec_replicas|Gauge 	deployment-name|deployment-namespace|Gauge
|kube_deployment_spec_paused|deployment-name|deployment-namespace|Gauge
|kube_deployment_spec_strategy_rollingupdate_max_unavailable|deployment-name|deployment-namespace|Gauge
|kube_deployment_spec_strategy_rollingupdate_max_surge|deployment-name|deployment-namespace|Gauge
|kube_deployment_metadata_generation|deployment-name|deployment-namespace|Gauge
|kube_deployment_labels|deployment-name|deployment-namespace|Gauge
|kube_deployment_created|deployment-name|deployment-namespace|Gauge
|===

=== Endpoint Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
| Object | Identifiers | Attributes | Datapoints
|kube_endpoint_address_not_ready|endpoint-name|endpoint-namespace|Gauge
|kube_endpoint_address_available|endpoint-name|endpoint-namespace|Gauge
|kube_endpoint_info|endpoint-name|endpoint-namespace|Gauge
|kube_endpoint_labels|endpoint-name|endpoint-namespace|Gauge
|kube_endpoint_created|endpoint-name|endpoint-namespace
endpoint_label|Gauge
|===

=== Horizontal Pod Autoscaler Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
| Object | Identifiers | Attributes | Datapoints
|kube_hpa_metadata_generation|hpa, namespace|hpa-name, hpa-namespace|Gauge
|kube_hpa_spec_max_replicas|hpa, namespace|hpa-name, hpa-namespace|Gauge
|kube_hpa_spec_min_replicas|hpa, namespace|hpa-name, hpa-namespace|Gauge
|kube_hpa_status_current_replicas|hpa, namespace|hpa-name, hpa-namespace|Gauge
|kube_hpa_status_desired_replicas|hpa, namespace|hpa-name, hpa-namespace|Gauge
|kube_hpa_status_condition|hpa, namespace|hpa-name, hpa-namespace|Gauge
|kube_hpa_status_condition|hpa, namespace|hpa-name, hpa-namespace|Gauge
|===

=== Ingress Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
| Object |Identifiers |Attributes|Datapoints
|kube_ingress_info|ingress
namespace|ingress-name
ingress-namespace
|Gauge
|kube_ingress_labels|ingress
namespace
ingress-name
label_INGRESS_LABEL|ingress-name
ingress-namespace INGRESS_LABEL|Gauge
|kube_ingress_created|endpoint-name|endpoint-namespace|Gauge
|kube_ingress_metadata_resource_version|ingress
namespace
resource_version|ingress-name
ingress-namespace
resource_version|Gauge
|kube_ingress_path|ingress, namespace host, path, service_name service_port|ingress-name ingress-namespace ingress-host ingress-path service name for path 
service port for path|Gauge
|===

=== Job Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object|Identifiers|Attributes|Datapoints
|kube_job_info|job_name namespace|job-name job-namespace|Gauge
|kube_job_labels |job_name namespace label_JOB_LABEL|job-name job-namespace JOB_LABEL|Gauge
|kube_job_owner |job_name namespace label_JOB_LABEL|job-name job-namespace JOB_LABEL|Gauge
|kube_job_spec_parallelism|job_name namespace|job-name job-namespace|Gauge
|kube_job_spec_completions|job_name namespace|job-name job-namespace|Gauge
|kube_job_spec_active_deadline_seconds|job_name namespace|job-name job-namespace|Gauge 
|kube_job_status_active |job_name namespace|job-name job-namespace|Gauge
|kube_job_status_succeeded|job_name namespace|job-name job-namespace|Gauge
|kube_job_status_failed|job_name namespace|job-name job-namespace|Gauge
|kube_job_status_start_time|job_name namespace|job-name job-namespace|Gauge
|kube_job_status_completion_time|job_name namespace|job-name job-namespace|Gauge
|kube_job_complete|job_name namespace|job-name job-namespace|Gauge
|kube_job_failed|job_name namespace|job-name job-namespace|Gauge
|kube_job_created|job_name namespace|job-name job-namespace|Gauge
|===


=== LimitRange Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints
|kube_limitrange|limitrange name
namespace resource name constraint
|Resource Name: 
Pod
Container
PersistentVolumeClaim |Gauge
|kube_limitrange_created|limitrange name
namespace||Gauge

|kube_limitrange_annotations
|limitrange-name
limitrange-namespace
LIMITRANGE_ANNOTATION|
|Gauge
|===

=== Namespace Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints
|kube_namespace_status_phase| namespace-name |status:
Active
Terminating|Gauge
|kube_namespace_labels|namespace-name
namespace label||Gauge 
|kube_namespace_annotations |namespace-name|ns_annotation|Gauge
|kube_namespace_created|namespace-name|| Gauge | 
|===

=== Node Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints
|kube_node_info|
node-address
kernel version
os-image-name
container-runtime-and-version-combination
kubelet version
kubeproxy-version
provider_id||Gauge

|kube_node_labels|
Unknown||Gauge

|kube_node_spec_unschedulable|node-address||Gauge
|kube_node_spec_taint|node-address|taint-key
taint-value
taint-effect|Gauge

|kube_node_status_capacity|node-address|Phase:
Pending
Running
Terminated
|Gauge
|kube_node_status_allocatable|node-address
resource-name|resource unit|Gauge

|kube_node_status_condition|node-address||

|kube_node_created|node address||Gauge
|===

=== Persistent Volume Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints
|kube_persistentvolume_capacity_bytes|pv-name||Gauge

|kube_persistentvolume_status_phase|pv name|phase: Bound
Failed
Pending
Available
Released|

|kube_persistentvolume_labels|persistentvolume-name
PERSISTENTVOLUME_LABEL||Gauge
|kube_persistentvolume_info|pv-name
storageclass-name||Gauge
|===

=== Persistant Volume Claim Metrics

|===
|Object | Identifiers | Attributes | Datapoints

|kube_persistentvolumeclaim_access_mode|access_mode
namespace
persistentvolumeclaim||Gauge

|kube_persistentvolumeclaim_info|persistentvolumeclaim-namespace
persistentvolumeclaim-name
persistentvolumeclaim-access-mode|
|Gauge

|kube_persistentvolumeclaim_labels|persistentvolumeclaim-namespace persistentvolumeclaim-name
PERSISTENTVOLUMECLAIM_LABEL||Gauge

|kube_persistentvolumeclaim_status_phase
|persistentvolumeclaim-namespace persistentvolumeclaim-name
||Gauge

|kube_persistentvolumeclaim_resource_requests_storage_bytes|persistentvolumeclaim-namespace persistentvolumeclaim-name
||Gauge

|kube_persistentvolumeclaim_annotations
|persistentvolumeclaim-namespace persistentvolumeclaim-name
PERSISTENTVOLUMECLAIM_ANNOTATION
||Gauge
|===


[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints

|kube pod info
|pod name
pod namespace|
host ip
pod ip
node name
uid
|Gauge


|kube pod start time
|pod name 
pod namespace
|
|Gauge

|kube_pod_completion_time
|pod name 
pod namespace
||Gauge

|kube_pod_owner|
pod name 
pod namespace
|owner_kind
owner_name
owner_is_controller
|Gauge

|kube_pod_labels
|pod name 
pod namespace
|label pod label
|Gauge

|kube_pod_status_phase
|pod-name
pod-namespace
|Condition:  true false unknown
|Gauge

|kube_pod_container_info
|container name
pod name
|image name
image id
container id
|Gauge

|kube pod container status waiting
|container-name
pod-name
pod-namespace
||Gauge

|kube_pod_container_status_waiting_reason
|container-name
pod-name
pod-namespace
|Container Creating:
Crash Loop Back Off
Err Image Pull
Image Pull BackOff
Create Container Config Error
Invalid Image Name
Create Container Error
|Gauge

|kube_pod_container_status_running
|container-name
pod-name
pod-namespace
|
|Gauge

|kube_pod_container_status_terminated
|container-name
pod-name
pod-namespace
|Reason: 
OOMKilled
Error
Completed
ContainerCannotRun
DeadlineExceeded
|Gauge

|kube_pod_container_status_last_terminated_reason
|container-name
pod-name
pod-namespace
|Reason: 
OOMKilled
Error
Completed
ContainerCannotRun
DeadlineExceeded
|Gauge

|kube_pod_container_status_ready
|container-name
pod-name
pod-namespace
|
|Gauge

|kube_pod_container_status_restarts_total
|container-name
pod-name
pod-namespace
|
|Counter

|kube_pod_container_resource_requests_cpu_cores
|container-name
pod-name
pod-namespace
node-name
|
|Gauge

|kube_pod_container_resource_requests
|container-name
pod-name
pod-namespace
node-name
|resource=<resource-name
unit=<resource-unit
|Gauge

|kube_pod_container_resource_requests_memory_bytes
|container-name
pod-name
pod-namespace
node-name
|
|Gauge

|kube_pod_container_resource_limits
|container-name
pod-name
pod-namespace
node-name
|resource-name
resource-unit 
|Gauge

|kube_pod_container_resource_limits_memory_bytes
|container-name
pod-name
pod-namespace
node-name
|
|Gauge

|kube_pod_created
|pod-name
pod-namespace
||Gauge

|kube_pod_init_container_info
|container-name
pod-name
pod-namespace
|image-name
image-id
containerid
|Gauge

|kube_pod_init_container_status_waiting
|container-name
pod-name
pod-namespace
||Gauge

|kube_pod_init_container_status_waiting_reason
|container-name
pod-name
pod-namespace 
|ContainerCreating:  
CrashLoopBackOff
ErrImagePull
ImagePullBackOff
CreateContainerConfigError
|Gauge

|kube_pod_init_container_status_running
|container-name
pod-name
pod-namespace 
||Gauge


|kube_pod_init_container_status_terminated
|container-name
pod-name
pod-namespace 
|
|Gauge

|kube_pod_init_container_status_terminated_reason
|container-name
pod-name
pod-namespace 
|Reaseon:
OOMKilled
Error
Completed
ContainerCannotRun
DeadlineExceeded
|Gauge

|kube_pod_init_container_status_last_terminated_reason
|container-name
pod-name
pod-namespace
|Reason:
OOMKilled
Error
Completed
ContainerCannotRun
DeadlineExceeded
|Gauge

|kube_pod_init_container_status_ready
|container-name
pod-name
pod-namespace
|
|Gauge

|kube_pod_init_container_status_restarts_total
|container-name
pod-name
pod-namespace
|
|Counter

|kube_pod_init_container_resource_requests
|container-name
pod-name
pod-namespace
node-name 
|resource-name
resource-unit
|Gauge

|kube_pod_init_container_resource_limits
|container-name
pod-name
pod-namespace
node-name 
|resource-name
resource-unit
|Gauge

|kube_pod_spec_volumes_persistentvolumeclaims_info
|pod-name
pod-namespace
volume-name
|persistentvolumeclaim-claimname
|Gauge

|kube_pod_spec_volumes_persistentvolumeclaims_readonly 
|pod-name
pod-namespace
volume-name
|persistentvolumeclaim-claimname
|Gauge

|kube_pod_status_scheduled_time
|pod-name
pod-namespace
|
|Gauge
|===

=== Pod Disruption Budget Metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints

|kube_poddisruptionbudget_created|pdb-name
pdb-namespace||Gauge

|kube_poddisruptionbudget_status_current_healthy|pdb-name
pdb-namespace||Gauge

|kube_poddisruptionbudget_status_desired_healthy
|pdb-name
pdb-namespace||Gauge

|kube_poddisruptionbudget_status_pod_disruptions_allowed
|pdb-name
pdb-namespace||Gauge

|kube_poddisruptionbudget_status_expected_pods
|pdb-name
pdb-namespace||Gauge

|kube_poddisruptionbudget_status_observed_generation
|pdb-name
pdb-namespace||Gauge

|kube_poddisruptionbudget_annotations
|PODDISRUPTIONBUDGET_ANNOTATION
poddisruptionbudget-name
 poddisruptionbudget-namespace||Gauge
|===
 
=== ReplicaSet metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints

|kube_replicaset_status_replicas|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_status_fully_labeled_replicas |replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_status_ready_replicas
|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_status_observed_generation|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_spec_replicas
|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_metadata_generation
|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_labels
|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_created
|replicaset-name
replicaset-namespace||Gauge

|kube_replicaset_owner
|replicaset-name
replicaset-namespace
owner kind
owner name
whether owner is controller||Gauge

|kube_replicaset_annotations
|replicaset-name
replicaset-namespace
REPLICASET_ANNOTATION||Gauge

|===

=== ReplicationController metrics

[cols="<.<,<.<,<.<,<.<"]

|===
|Object | Identifiers | Attributes | Datapoints

|kube_replicationcontroller_status_replicas
|replicationcontroller-name
replicationcontroller-namespace||Gauge

|kube_replicationcontroller_status_fully_labeled_replicas 	
|replicationcontroller-name
replicationcontroller-namespace||Gauge

|kube_replicationcontroller_status_ready_replicas
|replicationcontroller-name
replicationcontroller-namespace||Gauge

|kube_replicationcontroller_status_available_replicas |replicationcontroller-name
replicationcontroller-namespace||Gauge

|kube_replicationcontroller_status_observed_generation
|replicationcontroller-name
replicationcontroller-namespace||Gauge
|===

== Troubleshooting

[cols=2*, options="header", cols"50,50"]
|===
|Problem:|Try this:
|I ran the Kubernetes agent installer command, but I do not see a Telegraf agent pod running via:

 sudo kubectl --namespace monitoring get pods

|Check if there were any errors deploying the DaemonSet:

 sudo kubectl --namespace monitoring describe ds telegraf-ds

If there are errors related to SecurityContextConstraints, do the following:

1. Generate the Telegraf DaemonSet YAML

 sudo kubectl --namespace monitoring get ds telegraf-ds -o yaml > /tmp/telegraf-ds.yaml

2. Stop the Telegraf service

 sudo kubectl --namespace monitoring delete ds telegraf-ds

3. Create the necessary SecurityContextConstraint (see "Configuring Agent to Collect Data" section)

4. Re-create the Telegraf DaemonSet
|I configured Telegraf to obtain information about my Kubernetes cluster, but I don't see any information in Cloud Insights. I see "invalid header field value" errors in the Telegraf log file pertaining to the kubernetes input plugin I configured. 
|Ensure the referenced bearer_token file does not have a trailing newline. To verify, run the following command, and confirm that it returns 0: 

 tail -c1 <bearer_token_file> |wc -l
 
|===

Additional information may be found from the link:concept_requesting_support.html[Support] page.
