---
sidebar: sidebar
permalink: task_webhook_example_pagerduty.html
keywords: webhook, notification, PagerDuty, integration
summary: Create a webhook to alert on performance or inventory thresholds for Pagerduty
---

= Webhook Example for Pagerduty

:toc: macro
:hardbreaks:
:toclevels: 1
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Webhooks allow users to send alert notifications to various applications using a customized webhook channel. This page provides an example for setting up Webhooks for Pagerduty.

NOTE: This page refers to third-party instructions, which could be subject to change. Refer to the link:https://support.pagerduty.com/docs/services-and-integrations[Pagerduty documentation] for the most up-to-date information. 

In Pagerduty:

. Navigate to *Services > Service Directory* and click on the *+New Service* button​

. Enter in a _Name_ and select _Use our API directly_.  Click on _Add Service_.

image:Webhooks_PagerDutyScreen1.png[Pagerduty screen]

. Click on the _Integrations_ tab to see the _Integration Key_. This is the _Routing Key_ that will be needed for the Cloud Insights Webhooks configuration.

. Go to *Incidents* or *Services* to view Alerts.

image:Webhooks_PagerDutyScreen2.png[Pagerduty Screen]


With PagerDuty, you must create separate integrations for Triggered events and Resolved events. To add a new integration:

In Cloud Insights:

. Select the _Integrations_ tab and choose _Add a new integration_.

. Create a webhook notification called "PagerDuty Trigger" (or something equally meaningful for you).

. Set the URL to `https://events.pagerduty.com/v2/enqueue*.

. Copy the contents of _trigger.json_ into the webhook *Message Body`

. Create a custom parameter secret named `routingKey` and set it to the PagerDuty `routingKey` integration value.

Repeat steps 1-4 for "PagerDuty Resolve" using `resolve.json`

Set your webhooks as notifications for integration alerts

If you would like to create a webhook for warning as well, copy `trigger.json` and replace `critical` with `warning`.

Create a Custom Parameter for routingKey and enter routingKey in the Value field​

image:Webhooks_Custom_Paramater_Routing_Key.png[Setting the Routing Key]



Trigger vs Resolve: Two separate templates.  Resolved alerts are no longer displayed in PagerDuty​

URL is Static: https://events.pagerduty.com/v2/enqueue ​

routingKey must be setup as a custom parameter​



